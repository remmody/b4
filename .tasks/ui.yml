version: "3"

tasks:
  install:
    desc: Install UI dependencies
    dir: "{{.UI_DIR}}"
    cmds:
      - pnpm install
    sources:
      - "{{.UI_DIR}}/package.json"
      - "{{.UI_DIR}}/pnpm-lock.yaml"
    generates:
      - "{{.UI_DIR}}/node_modules/.pnpm/lock.yaml"

  dev:
    desc: Start UI dev server
    dir: "{{.UI_DIR}}"
    deps: [install]
    cmds:
      - pnpm dev

  build:
    desc: Build UI for production
    dir: "{{.UI_DIR}}"
    deps: [install]
    cmds:
      - VITE_APP_VERSION={{.VERSION}} pnpm build

  lint:
    desc: Lint UI code
    dir: "{{.UI_DIR}}"
    cmds:
      - pnpm lint
